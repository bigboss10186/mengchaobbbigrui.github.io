---
layout:     post
title:      jetbot制作精讲
subtitle:   jetbot
date:       2019-08-25
author:     BY Bigboss
header-img: img/city-5974876_1920.jpg
catalog: 	 true
tags:
    - experiment
---

# jetbot

我主要介绍jetbot这个基于jetson nano的小车，接下来一一介绍我制作整个小车的经历。


![jetbot](https://i.loli.net/2019/08/25/QIjTsiMElJ8hZyU.jpg)

## 1 购物

[购物链接](https://github.com/open-ai-robot/awesome-nvidia-jetson/wiki)

由于我在做jetbot时，NVIDIA才刚刚开源这个项目，想来也算是第一批动手去做的人之一个。现在淘宝上会有各种各样的成品，但是我不鼓励去直接购买成品，因为组装小车本身也很有趣，如果时间允许可以买零件自己组装，接下来说几点注意事项：

（1）为了方便学习以及各种各样可能会出现的问题，最好能有一块显示器（如果是比较老的显示屏需要买转接头，我用过两种转接头，其中一种好使，一种不好使，具体原因不是很清楚，所以建议直接是HDMI接口的屏幕），以及鼠标键盘，由于芯片散热有很大问题，最好带一个风扇（芯片上面预留了风扇的接口以及紧固螺丝的位置）。有些时候需要通过手柄控制机器人的行走，由于兼容问题，这里建议为ps4，根据自己的需求购买。

（2）Raspberry Pi V2相机

该相机为800万像素，62.2度广角，为了让视野更开阔，也是能让以后的测试更精准，需要加购IMX219对应的摄像头模组，安装过程也很简单，只需将原模块上的小的摄像头取出，将模组的连接头贴上摁紧即可，原摄像头可以保留以后用。

（3）电源问题

jetson nano有两种供接口，一种为DC的直筒型供电插口，另外一种是Micro usb接口，Micro usb供电方式为5v2a，在使用时要将jetson nano调制5w的低功率模式，具体方法为：

在浏览器中键入http://<jetbot_ip_address>:8888，这里面中间部分是芯片id，获得id的方式有很多，在刷入jetbot的系统后，直接通过i2c接口连接的oled显示屏上面会直接显示芯片id，如果已经连接了屏幕可以在终端输入`ifconfig -a`，在最下面会看到192.168.43.235类似的即为芯片id，这时会进入Jupyter notebook中，通过

```sudo nvpmodel -m1```

选择5w功率模式，

`sudo nvpmodel -q`

查看是否处于5w工作模式

如果未设置正确的工作模式在运行程序时可能会出现自动关机之类的状况。

在确定了工作模式后就要选择正确的电源，亲测购买链接里面的小米充电宝不行，因为充电宝的充电保护机制使得在大量电流输出的时候会自动切断电源，造成芯片死机，会有不必要的影响，所以建议使用锂电池，如果空间够大也可以考虑蓄电池，我就在电池上费了很大的功夫，一直到最后换了12v的电源，通过降压模块降至5v，以后几乎不会发生突然断电的情况，我当时每每给别人看的时候就会出现突然关机的情况，查过各种原因后才知道是电源出了问题。

如果使用5v4a的圆筒插头供电的话就不需要设置5w的低功率模式，在使用的时候也不会出现功率过大时突然断电的情况（亲身经历，真的很尴尬，想象一下自己正在给别人津津有味的讲着自己的杰作，然后车子突然不动，死机了）。

（4）电机的选择

建议大家选择相对比较好的电机，我当时在控制车子向前走的时候车子就会左转，检查了无数遍程序，后来发现是电机的转速不对，相同电压的情况下一个快一个慢（我真是醉了），最后也花了很长时间才找到问题所在。
## 2 制作

相信大家动手能力都不错，接下来的制作过程我就讲一些我在制作过程中遇到的“坑”，就整个过程大致向大家介绍一下。

### 3D打印

想做出来一个车，光买了零件肯定是不够的，车身需要3D打印，下面是官方给的3D打印文件

[3D打印文件](https://github.com/NVIDIA-AI-IOT/jetbot/tree/master/assets)

打印的时候可以根据自己的需求更改部分零件，尤其注意其中最大的车身部分，中间的夹层是用来放电源的，只能放的下一些薄一点的充电宝，如果自己的电源比较厚可以把中间夹层加高，加高的时候一定注意中心对称，只有这样才不能给以后增加麻烦，避免一些不必要的失误。

### 整体安装

[安装教程](https://github.com/NVIDIA-AI-IOT/jetbot/wiki/Hardware-Setup)

如果有条件的话购买官方一模一样的零件是比较好的，鉴于淘宝上一些进口商品没有或者过于贵的情况可以找相同的国产零件替换。

### 电源部分

我在做的时候供电是最大的问题，官方的方案是充电宝的两个输出口一个为jetson nano供电，另外一个给电机驱动板供电，本身jetson nano对电源的要求就比较严格，再加上充电宝要同时对电机驱动板供电会加大nano死机的几率，所以我采用两个电源的方法，即用两个电源同时为nano和电机驱动供电，这个方法看似简单，但是最开始我们找nano死机的原因找了好久（笑哭）。

### 摄像头

摄像头按照官方给的型号买，jetson nano已经做到完全兼容Raspberry Pi V2相机，但是在安装的时候注意安装的时候连接部分的正反，如果程序运行到摄像头部分会报错，建议将连接部分拆下来反装试一下。

这就是我在安装jetbot时遇到的一些问题，其实都很容易解决，只是希望看完后能节省你一些解决问题的时间，车装后就可以初步接触深度学习，一些和AI相关的知识，祝学习愉快。


